<div class="bg-white rounded-lg shadow-sm p-6 border border-gray-200">
  <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0">
    
    <!-- Search and Project Filter -->
    <div class="flex flex-col sm:flex-row sm:items-center space-y-4 sm:space-y-0 sm:space-x-4">
      
      <!-- Search -->
      <mat-form-field class="w-full sm:w-80">
        <input matInput 
               placeholder="Search tasks..."
               [formControl]="searchControl"
               (input)="onSearchChange($event)">
        <mat-icon matSuffix>search</mat-icon>
      </mat-form-field>
      
      <!-- Project Filter -->
      <div class="w-full sm:w-48">
        <mat-form-field class="w-full">
          <mat-label>Project</mat-label>
          <mat-select [value]="filters().projectId || 'all'" 
                     (selectionChange)="onProjectChange($event.value)">
            <mat-option value="all">All Projects</mat-option>
            @for (project of projects(); track project.id) {
              <mat-option [value]="project.id">{{ project.name }}</mat-option>
            }
          </mat-select>
        </mat-form-field>
      </div>
      
      <!-- Priority Filter -->
      <div class="w-full sm:w-40">
        <mat-form-field class="w-full">
          <mat-label>Priority</mat-label>
          <mat-select [value]="filters().priority || 'all'"
                     (selectionChange)="onPriorityChange($event.value)">
            <mat-option value="all">All Priorities</mat-option>
            @for (priority of priorityOptions; track priority.value) {
              <mat-option [value]="priority.value">{{ priority.label }}</mat-option>
            }
          </mat-select>
        </mat-form-field>
      </div>
      
      <!-- Assignee Filter -->
      <div class="w-full sm:w-48">
        <mat-form-field class="w-full">
          <mat-label>Assignee</mat-label>
          <mat-select [value]="filters().assigneeId || 'all'"
                     (selectionChange)="onAssigneeChange($event.value)">
            <mat-option value="all">All Assignees</mat-option>
            <mat-option value="me">Assigned to me</mat-option>
            <mat-option value="unassigned">Unassigned</mat-option>
            @for (assignee of assignees(); track assignee.id) {
              <mat-option [value]="assignee.id">{{ assignee.name }}</mat-option>
            }
          </mat-select>
        </mat-form-field>
      </div>
    </div>
    
    <!-- Status Toggle and Additional Filters -->
    <div class="flex flex-col sm:flex-row sm:items-center space-y-4 sm:space-y-0 sm:space-x-4">
      
      <!-- Status Filter -->
      <div class="flex items-center space-x-2">
        <mat-button-toggle-group [value]="filters().status || 'all'" 
                                (change)="onStatusChange($event.value)" 
                                class="border rounded">
          <mat-button-toggle value="all">All</mat-button-toggle>
          <mat-button-toggle value="pending">Pending</mat-button-toggle>
          <mat-button-toggle value="in-progress">In Progress</mat-button-toggle>
          <mat-button-toggle value="completed">Completed</mat-button-toggle>
        </mat-button-toggle-group>
      </div>
      
      <!-- Quick Filters -->
      <div class="flex items-center space-x-2">
        <button mat-stroked-button 
                [color]="filters().isOverdue ? 'warn' : 'basic'"
                (click)="toggleOverdueFilter()">
          <mat-icon class="mr-1">schedule</mat-icon>
          Overdue
        </button>
        
        <button mat-stroked-button 
                [color]="hasActiveFilters() ? 'primary' : 'basic'"
                (click)="clearAllFilters()">
          <mat-icon class="mr-1">clear</mat-icon>
          Clear Filters
        </button>
      </div>
    </div>
  </div>
  
  <!-- Active Filters Display -->
  @if (activeFilterChips().length > 0) {
    <div class="mt-4 pt-4 border-t border-gray-200">
      <div class="flex flex-wrap gap-2">
        <span class="text-sm text-gray-600 mr-2">Active filters:</span>
        @for (chip of activeFilterChips(); track chip.key) {
          <mat-chip [removable]="true" (removed)="removeFilter(chip.key)">
            {{ chip.label }}
            <mat-icon matChipRemove>cancel</mat-icon>
          </mat-chip>
        }
      </div>
    </div>
  }
</div>