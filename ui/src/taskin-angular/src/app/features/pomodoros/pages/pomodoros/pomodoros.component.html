<div class="space-y-6">
  <!-- Page Header -->
  <div class="bg-white rounded-lg shadow-sm p-6 border border-gray-200">
    <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between">
      <div>
        <h1 class="text-2xl font-bold text-gray-900">Pomodoro Timer</h1>
        <p class="mt-1 text-sm text-gray-600">
          Stay focused with the Pomodoro Technique - 25 minutes of focused work, 5 minutes break.
        </p>
      </div>
      <div class="mt-4 sm:mt-0">
        <div class="flex items-center space-x-2 text-sm text-gray-600">
          <mat-icon class="text-green-600">check_circle</mat-icon>
          <span>{{ completedWorkPomodoros() }} completed today</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Timer Section -->
  <div class="max-w-2xl mx-auto">
    <div class="bg-white rounded-lg shadow-sm p-8 border border-gray-200 text-center">
      <!-- Session Type Indicator -->
      <div class="mb-6">
        <div
          class="inline-flex items-center px-4 py-2 rounded-full text-sm font-medium"
          [class.bg-blue-100]="currentSessionType() === PomodoroType.Work"
          [class.text-blue-800]="currentSessionType() === PomodoroType.Work"
          [class.bg-green-100]="currentSessionType() === PomodoroType.ShortBreak"
          [class.text-green-800]="currentSessionType() === PomodoroType.ShortBreak"
        >
          <mat-icon
            class="mr-2"
            [class.text-blue-600]="currentSessionType() === PomodoroType.Work"
            [class.text-green-600]="currentSessionType() !== PomodoroType.Work"
          >
            {{ currentSessionType() === PomodoroType.Work ? 'work' : 'coffee' }}
          </mat-icon>
          {{ currentSessionType() | sessionTypeDisplay }}
        </div>
      </div>

      <!-- Timer Display -->
      <div class="mb-8">
        <div class="relative w-48 h-48 mx-auto mb-6">
          <!-- Progress Circle -->
          <svg class="w-full h-full transform -rotate-90" viewBox="0 0 100 100">
            <circle cx="50" cy="50" r="45" stroke="#e5e7eb" stroke-width="8" fill="none" />
            <circle
              cx="50"
              cy="50"
              r="45"
              [attr.stroke]="currentSessionType() === PomodoroType.Work ? '#3b82f6' : '#10b981'"
              stroke-width="8"
              fill="none"
              stroke-linecap="round"
              [attr.stroke-dasharray]="circumference"
              [attr.stroke-dashoffset]="strokeDashoffset()"
              class="transition-all duration-1000 ease-in-out"
            />
          </svg>

          <!-- Timer Text -->
          <div class="absolute inset-0 flex flex-col items-center justify-center">
            <div class="text-4xl font-bold text-gray-900 mb-1">
              {{ timer().timeRemaining | formatTime }}
            </div>
            <div class="text-sm text-gray-500">
              {{ currentSessionType() === PomodoroType.Work ? 'Focus' : 'Break' }}
            </div>
          </div>
        </div>

        <!-- Timer Controls -->
        <div class="flex justify-center space-x-4">
          <button
            mat-mini-fab
            [color]="timer().isRunning ? 'warn' : 'primary'"
            (click)="toggleTimer()"
            class="shadow-lg"
          >
            <mat-icon>{{ timer().isRunning ? 'pause' : 'play_arrow' }}</mat-icon>
          </button>

          <button mat-stroked-button (click)="resetTimer()" class="px-6">
            <mat-icon class="mr-2">refresh</mat-icon>
            Reset
          </button>

          <button mat-stroked-button (click)="skipSession()" class="px-6">
            <mat-icon class="mr-2">skip_next</mat-icon>
            Skip
          </button>
        </div>
      </div>

      <!-- Session Settings -->
      <div class="border-t border-gray-200 pt-6">
        <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 text-center">
          <div>
            <p class="text-sm text-gray-600 mb-2">Work Session</p>
            <div class="flex items-center justify-center space-x-2">
              <button mat-icon-button (click)="adjustWorkTime(-1)" [disabled]="timer().isRunning">
                <mat-icon>remove</mat-icon>
              </button>
              <span class="text-lg font-semibold text-gray-900 min-w-[3rem]">{{ settings()?.workDuration || 25 }}</span>
              <button mat-icon-button (click)="adjustWorkTime(1)" [disabled]="timer().isRunning">
                <mat-icon>add</mat-icon>
              </button>
            </div>
          </div>

          <div>
            <p class="text-sm text-gray-600 mb-2">Break Time</p>
            <div class="flex items-center justify-center space-x-2">
              <button mat-icon-button (click)="adjustBreakTime(-1)" [disabled]="timer().isRunning">
                <mat-icon>remove</mat-icon>
              </button>
              <span class="text-lg font-semibold text-gray-900 min-w-[3rem]">{{ settings()?.shortBreakDuration || 5 }}</span>
              <button mat-icon-button (click)="adjustBreakTime(1)" [disabled]="timer().isRunning">
                <mat-icon>add</mat-icon>
              </button>
            </div>
          </div>

          <div>
            <p class="text-sm text-gray-600 mb-2">Sessions Today</p>
            <div class="text-lg font-semibold text-gray-900">{{ todayPomodoros().length }}</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Today's Sessions -->
  <div class="bg-white rounded-lg shadow-sm border border-gray-200">
    <div class="p-6 border-b border-gray-200">
      <h3 class="text-lg font-semibold text-gray-900">Today's Sessions</h3>
    </div>
    <div class="p-6">
      <div class="grid grid-cols-2 sm:grid-cols-4 lg:grid-cols-8 gap-2">
        <div
          *ngFor="let session of todaySessions(); let i = index"
          class="w-8 h-8 rounded-full flex items-center justify-center text-xs font-medium"
          [class.bg-blue-100]="session.type === 'work'"
          [class.text-blue-800]="session.type === 'work'"
          [class.bg-green-100]="session.type === 'break'"
          [class.text-green-800]="session.type === 'break'"
          [class.bg-gray-100]="session.type === 'upcoming'"
          [class.text-gray-500]="session.type === 'upcoming'"
          [title]="
            session.type === 'work'
              ? 'Work session completed'
              : session.type === 'break'
              ? 'Break completed'
              : 'Upcoming session'
          "
        >
          {{ i + 1 }}
        </div>
      </div>
      <div class="mt-4 text-sm text-gray-600">
        <div class="flex items-center space-x-4">
          <div class="flex items-center">
            <div class="w-3 h-3 bg-blue-100 rounded-full mr-2"></div>
            <span>Work sessions</span>
          </div>
          <div class="flex items-center">
            <div class="w-3 h-3 bg-green-100 rounded-full mr-2"></div>
            <span>Break sessions</span>
          </div>
          <div class="flex items-center">
            <div class="w-3 h-3 bg-gray-100 rounded-full mr-2"></div>
            <span>Upcoming</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Statistics -->
  <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
    <div class="bg-white rounded-lg shadow-sm p-6 border border-gray-200 text-center">
      <div class="text-3xl font-bold text-blue-600 mb-2">{{ totalFocusTime() }}</div>
      <div class="text-sm text-gray-600">Total Focus Time Today</div>
    </div>

    <div class="bg-white rounded-lg shadow-sm p-6 border border-gray-200 text-center">
      <div class="text-3xl font-bold text-green-600 mb-2">{{ averageSessionLength() }}</div>
      <div class="text-sm text-gray-600">Average Session Length</div>
    </div>

    <div class="bg-white rounded-lg shadow-sm p-6 border border-gray-200 text-center">
      <div class="text-3xl font-bold text-purple-600 mb-2">{{ productivityScore() }}%</div>
      <div class="text-sm text-gray-600">Productivity Score</div>
    </div>
  </div>
</div>
